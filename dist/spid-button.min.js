function languages(){return{lang:{it:{naviga_indietro:"Torna indietro",alt_logo_SPID:"Logo SPID",scegli_provider_SPID:"Scegli il tuo provider SPID",annulla_accesso:"Annulla l'accesso",non_hai_SPID:"Non hai SPID?",cosa_SPID:"Cos'è SPID?",entra_con_SPID:"Entra con SPID",scopri_di_piu:"Scopri di più.",accedi_con_idp:"Accedi a SPID con {0}",idp_disabled:"Provider non attivo"},en:{naviga_indietro:"Go back",alt_logo_SPID:"SPID logo",scegli_provider_SPID:"Choose your SPID provider",annulla_accesso:"Cancel access",non_hai_SPID:"Don't have SPID?",cosa_SPID:"What is SPID?",entra_con_SPID:"Sign in with SPID",scopri_di_piu:"Learn more",accedi_con_idp:"Access to SPID with {0}",idp_disabled:"Provider not enabled"},de:{naviga_indietro:"Gehen Sie zurück",alt_logo_SPID:"SPID Logo",scegli_provider_SPID:"Wähle Ihren SPIDProvider",annulla_accesso:"Rückgängig Zugang",non_hai_SPID:"Haben Sie nicht SPID?",cosa_SPID:"Was ist SPID?",entra_con_SPID:"Loggen Sie mit SPID",scopri_di_piu:"Finde mehr heraus",accedi_con_idp:"Zugriff auf SPID mit {0}",idp_disabled:"Provider nicht aktiviert"}}}}function providers(){return spidProviders=[{protocols:["SAML"],entityName:"Aruba ID",logo:"spid-idp-aruba.svg",entityID:"https://loginspid.aruba.it",active:!0},{protocols:["SAML"],entityName:"Infocert ",logo:"spid-idp-infocertid.svg",entityID:"https://identity.infocert.it",active:!0},{protocols:["SAML"],entityName:"Poste ID",logo:"spid-idp-posteid.svg",entityID:"https://posteid.poste.it",active:!0},{protocols:["SAML"],entityName:"Sielte",logo:"spid-idp-sielteid.svg",entityID:"sielte.it",active:!0},{protocols:["SAML"],entityName:"Tim ID",logo:"spid-idp-timid.svg",entityID:"https://login.id.tim.it/affwebservices/public/saml2sso",active:!0},{protocols:["SAML"],entityName:"Namirial ID",logo:"spid-idp-aruba.svg",entityID:"https://idp.namirialtsp.com/idp",active:!0},{protocols:["SAML"],entityName:"SPIDItalia Register.it",logo:"spid-idp-aruba.svg",entityID:"https://spid.register.it",active:!0},{protocols:["SAML"],entityName:"Intesa ID",logo:"spid-idp-aruba.svg",entityID:"https://spid.intesa.it",active:!0}]}var _SPID;!function(e){e.prototype.initResources=function(){this.resources={assetsBaseUrl:"https://italia.github.io/spid-smart-button/",stylesheetUrl:"https://italia.github.io/spid-smart-button/spid-button.min.css"}}}((_SPID=function(e,t){function i(){this.resources={},this.templates={},this._lang="it",this._i18n=e(),this._availableProviders=t(),this._selector="#spid-button",this._protocol="SAML",this._style={size:"medium",colorScheme:"positive",fluid:!1,cornerStyle:"rounded"}}function n(e,t){return['<img aria-hidden="true"','src="',this.getResources().assetsBaseUrl,e,'.svg"','alt="',t,'" style="float:left"/>'].join("")}function s(e,t){return['<input type="hidden" name="',e,'" value="',t,'" />'].join("")}return i.prototype.initTemplates=function(){this.templates={spidMainContainers:function(){return['<div id="spid-enter">',"</div>"].join("")},spidProviderChoiceModal:function(e){return['<section id="agid-spid-panel-select" class="agid-spid-panel" aria-labelledby="spid-enter-title-page" tabindex="0">','<header class="agid-spid-header">','<div class="agid-spid-panel-back agid-spid-panel-element">','<div id="agid-logo" class="agid-display-logo agid-fade-out-left">',n.call(this,"img/spid-logo",this.getI18n("alt_logo_SPID")),"</div>",'<div id="agid-close-button" class="agid-display-close agid-fade-out-right">','<button tabindex="0" id="agid-spid-panel-close-button" class="agid-navigable" aria-labelledby="spid-cancel-access-button">',n.call(this,"img/close",this.getI18n("naviga_indietro")),"</button>","</div>","</div>","</header>",'<div id="agid-spid-panel-content">','<div class="agid-spid-panel-content-center">','<h1 id="spid-enter-title-page" class="agid-fade-in-bottom agid-fade-out-bottom">',this.getI18n("scegli_provider_SPID"),"</h1>",'<div class="agid-body-list">','<div id="spid-idp-list">',e,"</div>",'<div id="spid-non-hai-spid">','<span class="agid-non-hai-spid-font">',this.getI18n("non_hai_SPID"),"</span>",'<span id="spid-nonhai-spid" class="agid-spid-link agid-non-hai-spid-font">',this.getI18n("scopri_di_piu"),"</span>","</div>","</div>","</div>","</div>",'<div id ="spid-foot-btn" class="agid-fade-in-cancel">','<button id="spid-cancel-access-button" class="agid-font agid-navigable">',"<span>",this.getI18n("annulla_accesso"),"</span>","</button>","</div>","</section>"].join("")},spidProviderButton:function(e){var t="",i="",n=e.active?this.getI18n("accedi_con_idp",e.entityName):this.getI18n("idp_disabled");if("POST"===e.method){if(t+=s(e.fieldName||"idp",e.entityID),e.extraFields)for(property in e.extraFields)t+=s(property,e.extraFields[property]);return i=e.url,['<span class="agid-spid-idp">','<form action="',i,'" method="',e.method,'">','<button type="submit"','class="agid-spid-idp-button"','title="',n,'"',e.supported?"":"disabled",">",'<img src="',this.getResources().assetsBaseUrl,"img/idp-logos/",e.logo,'" alt="',e.entityName,'">',"</button>",t,"</form>","</span>"].join("")}if("GET"===e.method)return i=e.url.replace("{{idp}}",encodeURIComponent(e.entityID)),['<span class="agid-spid-idp">','<a title="',n,'" href="',i,'"',e.supported?"":"disabled",">",'<img src="',this.getResources().assetsBaseUrl,"img/idp-logos/",e.logo,'" alt="',e.entityName,'">',"</a>","</span>"].join("")},spidButton:function(e){var t=e.fluid?" agid-spid-enter-fluid ":"";return["\x3c!-- AGID - SPID BUTTON ",e.size.toUpperCase()," * begin * --\x3e",'<div id="spid-enter-button-container">','<button class="agid-spid-enter agid-font agid-spid-enter-button-',e.colorScheme," agid-spid-enter-button-",e.cornerStyle," agid-spid-enter-size-",e.size,t,'" hidden>','<span aria-hidden="true" class="agid-spid-enter-icon">','<img src="',this.getResources().assetsBaseUrl,'img/spid-ico-circle-bb.svg" alt="',this.getI18n("entra_con_SPID"),'"></img>',"</span>",'<span class="agid-spid-enter-text">',this.getI18n("entra_con_SPID"),"</span>","</button>","</div>","\x3c!-- AGID - SPID BUTTON ",e.size.toUpperCase()," * end * --\x3e"].join("")}}},i}(languages,providers))||{});var _SPID,SPID=function(e){"use strict";function t(e){e.removeAttribute("hidden")}function i(e){var t=document.createAttribute("hidden");e.setAttributeNode(t)}function n(e){var t=setInterval(function(){e.focus()},100);p.addEventListener("focus",function(){clearInterval(t)})}function s(e){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,document.head.appendChild(t)}function o(){c=document.querySelector("#spid-idp-list"),p=document.querySelector("#agid-spid-panel-select")}function a(e,t){var i;return e.map(function(e){e.url=t.url,e.method=t.method||"GET","POST"===e.method&&(e.fieldName=t.fieldName,e.extraFields=t.extraFields);for(i in t.mapping)e.entityID===i&&(e.entityID=t.mapping[i]);return e.supported?-1===e.protocols.indexOf(t.protocol)&&(e.supported=!1):-1===t.supported.indexOf(e.entityID)||-1===e.protocols.indexOf(t.protocol)?e.supported=!1:e.supported=!0,e})}function r(e,t){var i;if(t.extraProviders){for(i=0;i<t.extraProviders.length;i++)t.extraProviders[i].supported=!0;e=e.concat(t.extraProviders)}return e}function d(e){return!(!(e&&e.url&&e.supported)||e.supported.length<1)}var l,c,p,u=function(t){this.internalSPID=new e,this.internalSPID._init(t),this.changeLanguage=function(e){return this.internalSPID.changeLanguage(e)}};return e.prototype.getTemplate=function(e,t){return this.templates[e].call(this,t)},e.prototype.handleEscKeyEvent=function(e){27===e.keyCode&&this.hideProvidersPanel()},e.prototype.showProvidersPanel=function(){var e=this;t(l),n(p),document.addEventListener("keyup",function(t){e.handleEscKeyEvent(t)})},e.prototype.hideProvidersPanel=function(){var e=this;i(l),document.addEventListener("keyup",function(t){e.handleEscKeyEvent(t)})},e.prototype.renderAvailableProviders=function(){var e=this,t=document.querySelector("#spid-enter"),i="";e._availableProviders.forEach(function(t){i+=e.getTemplate("spidProviderButton",t)}),t.innerHTML=e.getTemplate("spidProviderChoiceModal",i),document.querySelector("#agid-spid-panel-close-button").addEventListener("click",function(){var t=document.getElementsByClassName("choosedButton")[0];document.getElementById("agid-spid-panel-select").classList.add("agid-spid-panel-anim"),e.hideProvidersPanel(),t.classList.remove("agid-enter-transition"),t.classList.remove("choosedButton"),t.classList.add("agid-reverse-enter-transition"),setTimeout(function(){t.classList.remove("agid-reverse-enter-transition")},2e3)}),document.querySelector("#spid-cancel-access-button").addEventListener("click",function(){var t=document.getElementsByClassName("choosedButton")[0];document.getElementById("agid-spid-panel-select").classList.add("agid-spid-panel-anim"),e.hideProvidersPanel(),t.classList.remove("agid-enter-transition"),t.classList.remove("choosedButton"),t.classList.add("agid-reverse-enter-transition"),setTimeout(function(){t.classList.remove("agid-reverse-enter-transition")},2e3)})},e.prototype.addContainersWrapper=function(e){(l=document.createElement("section")).id=e,i(l),document.body.insertBefore(l,document.body.firstChild),l.innerHTML=this.getTemplate("spidMainContainers",null)},e.prototype.renderSpidModalContainers=function(){document.getElementById("spid-enter-container")||(s(this.resources.stylesheetUrl),this.addContainersWrapper("spid-enter-container"))},e.prototype.renderModule=function(){this.renderSpidModalContainers(),this.renderAvailableProviders(),this.updateSpidButtons(),o()},e.prototype.checkStyleOptions=function(e){var t=["small","medium","large"],i=["positive","negative"],n=["rounded","sharp"],s=[!0,!1];return-1===t.indexOf(e.size.toLowerCase())?"Le dimensioni supportate sono "+t+" trovato invece:"+this._style.size:-1===i.indexOf(e.colorScheme.toLowerCase())?"I colori supportati sono "+i+" trovati invece:"+this._style.colorScheme:-1===n.indexOf(e.cornerStyle.toLowerCase())?"Il tipo di angoli supportati sono "+n+" trovati invece:"+this._style.cornerStyle:-1!==s.indexOf(e.fluid)||"I valori del parametro supportati sono "+s+" trovati invece:"+this._style.fluid},e.prototype.getMergedDefaultOptions=function(e){return e=e||{},e.lang=this._lang=e.lang||this._lang,e.selector=this._selector=e.selector||this._selector,e.protocol=e.protocol||this._protocol,e.size=this._style.size=e.size||this._style.size,e.colorScheme=this._style.colorScheme=e.colorScheme||this._style.colorScheme,e.fluid=this._style.fluid=e.fluid||this._style.fluid,e.cornerStyle=this._style.cornerStyle=e.cornerStyle||this._style.cornerStyle,e},e.prototype._init=function(e){var t,i=this;d(e)?(i.initResources(),e=i.getMergedDefaultOptions(e),!0===(t=i.checkStyleOptions(i._style))?(i.initTemplates(),i._availableProviders=r(i._availableProviders,e),i._availableProviders=a(i._availableProviders,e),i.renderModule()):console.error(t)):console.error("Non sono stati forniti i parametri obbligatori della configurazione")},e.prototype.changeLanguage=function(e){var t=this;t._lang=e,t.renderModule()},e.prototype.updateSpidButtons=function(){var e,t=document.querySelectorAll(this._selector),i=t.length,n=0,s=this;if(this._availableProviders)if(i)for(n;n<i;n++)t[n].innerHTML=this.getTemplate("spidButton",this._style),e=document.querySelectorAll(".agid-spid-enter"),Array.prototype.forEach.call(e,function(e){e.addEventListener("click",function(){var t=e.parentElement;t.classList.add("agid-enter-transition"),t.classList.add("choosedButton"),s.showProvidersPanel(),document.getElementById("agid-logo").classList.add("agid-fade-in-left"),document.getElementById("agid-close-button").classList.add("agid-fade-in-left"),document.getElementById("agid-spid-panel-select").classList.add("agid-spid-panel-anim"),setTimeout(function(){t.classList.remove("agid-enter-transition"),document.getElementById("agid-logo").classList.remove("agid-fade-in-left"),document.getElementById("agid-close-button").classList.remove("agid-fade-in-left"),document.getElementById("agid-spid-panel-select").classList.remove("agid-spid-panel-anim")},2e3)})});else console.warn("Nessun placeholder HTML trovato nella pagina per i pulsanti SPID");else console.error("Si è verificato un errore nel caricamento dei providers, impossibile renderizzare i pulsanti SPID")},e.prototype.setResources=function(e){this.resources=e},e.prototype.getResources=function(){return JSON.parse(JSON.stringify(this.resources))},e.prototype.getI18n=function(e,t){var i=this._lang,n=this._i18n.lang&&this._i18n.lang[i]&&this._i18n.lang[i][e],s=/\{\d}/;return t&&(n=n.replace(s,t)),n||console.error("La chiave richiesta non è disponibile nella lingua selezionata:",i,e),n||e},new function(){var e;this.init=function(t,i,n){return e=new u(t,i,n)}}}(_SPID||{});